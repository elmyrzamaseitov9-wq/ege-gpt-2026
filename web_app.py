import streamlit as st
import random

st.set_page_config(page_title="–ï–ì–≠-GPT", page_icon="ü§ñ")
st.title("–ï–ì–≠-GPT –ø–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–µ 2026 ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–¥–∞—á!")
st.markdown("–ü—Å–µ–≤–¥–æ-–ò–ò –Ω–∞ —à–∞–±–ª–æ–Ω–∞—Ö —Å —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–µ–π (—Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∫–ª—é—á–µ–π –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞). –í—ã–±–µ—Ä–∏ –Ω–æ–º–µ—Ä ‚Äî –ø–æ–ª—É—á–∏ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É!")

# –®–∞–±–ª–æ–Ω—ã –¥–ª—è –Ω–æ–º–µ—Ä–æ–≤ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)
templates = {
    "6": {
        "condition": "–†–æ–±–æ—Ç {name} —Å—Ç–æ–∏—Ç –Ω–∞ –ø–æ–ª–µ {size}x{size}. –û–Ω –º–æ–∂–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–≤–µ—Ä—Ö, –≤–Ω–∏–∑, –≤–ª–µ–≤–æ, –≤–ø—Ä–∞–≤–æ. –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—É—Ç–µ–π –æ—Ç (0,0) –¥–æ ({end_x},{end_y}) –±–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π.",
        "answer": lambda: random.randint(5, 15),
        "explanation": "–†–µ—à–µ–Ω–∏–µ —Ä–µ–∫—É—Ä—Å–∏–µ–π: f(x,y) = f(x-1,y) + f(x,y-1), —Å –±–∞–∑–æ–π f(0,0)=1. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ: {steps}."
    },
    "8": {
        "condition": "–í —Å–∏—Å—Ç–µ–º–µ —Å—á–∏—Å–ª–µ–Ω–∏—è —Å –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º {base} —á–∏—Å–ª–æ {num1} –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫ {code}. –°–∫–æ–ª—å–∫–æ –±–∏—Ç –Ω—É–∂–Ω–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —á–∏—Å–ª–∞ {num2}?",
        "answer": lambda: random.randint(8, 16),
        "explanation": "–ü–µ—Ä–µ–≤–æ–¥ –≤ –¥–≤–æ–∏—á–Ω—É—é: log2({num2}) +1 = {bits}. –†–∞–∑–±–æ—Ä: –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 2 –¥–æ –æ—Å—Ç–∞—Ç–∫–∞ 0."
    },
    "12": {
        "condition": "–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å '–†–µ–¥–∞–∫—Ç–æ—Ä' –Ω–∞ —Å—Ç—Ä–æ–∫–µ '{string}' –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã: –∑–∞–º–µ–Ω–∏—Ç—å 'A' –Ω–∞ 'B', —É–¥–∞–ª–∏—Ç—å —Å–∏–º–≤–æ–ª. –°–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤ –¥–æ '{target}'?",
        "answer": lambda: random.randint(3, 7),
        "explanation": "–ê–ª–≥–æ—Ä–∏—Ç–º: —Ü–∏–∫–ª –∑–∞–º–µ–Ω/—É–¥–∞–ª–µ–Ω–∏–π. –®–∞–≥–∏: 1. –ó–∞–º–µ–Ω–∞ {ops[0]}, 2. –£–¥–∞–ª–µ–Ω–∏–µ {ops[1]}..."
    },
    "15": {
        "condition": "–í –∏–≥—Ä–µ –¥–≤–∞ –∏–≥—Ä–æ–∫–∞, –º–∞—Ç—Ä–∏—Ü–∞ –≤—ã–∏–≥—Ä—ã—à–µ–π: {matrix}. –ö—Ç–æ –∏–º–µ–µ—Ç –≤—ã–∏–≥—Ä—ã—à–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é?",
        "answer": lambda: random.choice(["–ü–µ—Ä–≤—ã–π –∏–≥—Ä–æ–∫", "–í—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫", "–ù–∏—á—å—è"]),
        "explanation": "–¢–µ–æ—Ä–∏—è –∏–≥—Ä: –¥–æ–º–∏–Ω–∏—Ä—É—é—â–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏. –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä–æ–∫/—Å—Ç–æ–ª–±—Ü–æ–≤: {analysis}."
    },
    "16": {
        "condition": "–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å a_n = a_{n-1} + {k}*n, a1={a1}. –ù–∞–π–¥–∏ a_{n} –¥–ª—è n={n_val}.",
        "answer": lambda: random.randint(50, 200),
        "explanation": "–ó–∞–∫—Ä—ã—Ç–∞—è —Ñ–æ—Ä–º—É–ª–∞: a_n = {a1} + {k}*n*(n+1)/2. –ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞: {calc}."
    },
    "19-21": {
        "condition": "–ò–≥—Ä–∞ —Å –∫—É—á–∞–º–∏ –∫–∞–º–Ω–µ–π {piles}. –•–æ–¥: –≤–∑—è—Ç—å 1-3 –∏–∑ –∫—É—á–∏. –ö—Ç–æ –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏ –∏–¥–µ–∞–ª—å–Ω–æ–π –∏–≥—Ä–µ?",
        "answer": lambda: random.choice(["–ü–µ—Ä–≤—ã–π", "–í—Ç–æ—Ä–æ–π"]),
        "explanation": "–ù–∏–º: XOR —Å—É–º–º. {piles_xor} = 0 ‚Üí –≤—Ç–æ—Ä–æ–π –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç."
    },
    "23": {
        "condition": "–¶–µ–ø–æ—á–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π —Å—Ç—Ä–æ–∫–∏ '{s}' –≤ '{target}' —Å –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≤—Å—Ç–∞–≤–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ. –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —à–∞–≥–æ–≤.",
        "answer": lambda: random.randint(2, 6),
        "explanation": "–î–∏–Ω–∞–º–∏–∫–∞: dp[i][j] = min(dp[i-1][j]+1, ...). –¢–∞–±–ª–∏—Ü–∞: {dp_table}."
    },
    "24": {
        "condition": "–í —Ç–µ–∫—Å—Ç–µ '{text}' –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ –¥–ª–∏–Ω—ã {len}?",
        "answer": lambda: random.randint(3, 10),
        "explanation": "–ê–ª–≥–æ—Ä–∏—Ç–º: —Ü–∏–∫–ª –ø–æ —Å–ª–æ–≤–∞–º, –ø–æ–¥—Å—á—ë—Ç len(word)=={len}. –†–µ–∑—É–ª—å—Ç–∞—Ç: {count}."
    },
    "25": {
        "condition": "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–ª–∏—Ç–µ–ª–µ–π —á–∏—Å–ª–∞ {num}?",
        "answer": lambda: random.randint(4, 8),
        "explanation": "–§–∞–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: {num} = 2^{p1} * 3^{p2} * ... –î–µ–ª–∏—Ç–µ–ª–µ–π: (p1+1)*(p2+1)*... = {divs}."
    },
    "27": {
        "condition": "–†—é–∫–∑–∞–∫: –≤–µ—Å–∞ {weights}, —Ü–µ–Ω–Ω–æ—Å—Ç–∏ {values}, —ë–º–∫–æ—Å—Ç—å {capacity}. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å.",
        "answer": lambda: random.randint(20, 50),
        "explanation": "–î–ü: dp[w] = max(dp[w], dp[w-weight[i]] + value[i]). –¢–∞–±–ª–∏—Ü–∞: {dp_example}. –ú–∞–∫—Å: {max_val}."
    }
}

num = st.selectbox("–ù–æ–º–µ—Ä –∑–∞–¥–∞—á–∏:", list(templates.keys()))

if st.button("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É"):
    template = templates[num]
    # –†–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    params = {
        "name": random.choice(["–†–û–ë1", "BOT", "–ê–≥–µ–Ω—Ç"]),
        "size": random.randint(5, 10),
        "end_x": random.randint(3, 6),
        "end_y": random.randint(3, 6),
        "base": random.choice([2, 8, 16]),
        "num1": random.randint(10, 100),
        "code": ''.join(random.choices('01', k=8)),
        "num2": random.randint(100, 1000),
        "string": ''.join(random.choices('ABC', k=5)),
        "target": ''.join(random.choices('BC', k=4)),
        "matrix": f"[[{random.randint(0,1)}, {random.randint(0,1)}], [{random.randint(0,1)}, {random.randint(0,1)}]]",
        "k": random.randint(1, 5),
        "a1": random.randint(1, 10),
