import streamlit as st
import random

st.set_page_config(page_title="–ï–ì–≠-GPT", page_icon="ü§ñ")
st.title("–ï–ì–≠-GPT –ø–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–µ 2026 ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç!")
st.markdown("–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á —Å —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–µ–π (–±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏ –∫–ª—é—á–µ–π)")

templates = {
    "6": {
        "condition": "–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å ¬´–†–æ–±–æ—Ç¬ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è —Ä–∞–∑–º–µ—Ä–æ–º {size}√ó{size}. –û–Ω –º–æ–∂–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –≤–≤–µ—Ä—Ö, –≤–Ω–∏–∑, –≤–ª–µ–≤–æ, –≤–ø—Ä–∞–≤–æ. –°–∫–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—É—Ç–µ–π –¥–æ –ø—Ä–∞–≤–æ–≥–æ –Ω–∏–∂–Ω–µ–≥–æ —É–≥–ª–∞, –µ—Å–ª–∏ —Ä–æ–±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –≤—ã—Ö–æ–¥–∏—Ç—å –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—è?",
        "answer": lambda: random.randint(20, 252),
        "explanation": "–†–µ—à–∞–µ—Ç—Å—è —Ä–µ–∫—É—Ä—Å–∏–µ–π –∏–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –ü—É—Å—Ç—å f(x,y) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—É—Ç–µ–π –¥–æ –∫–ª–µ—Ç–∫–∏ (x,y). –¢–æ–≥–¥–∞ f(x,y) = f(x-1,y) + f(x,y-1), f(0,0)=1. –ò—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: {answer}."
    },
    "8": {
        "condition": "–°–∫–æ–ª—å–∫–æ –±–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª–∏–Ω–æ–π {symbols} —Å–∏–º–≤–æ–ª–æ–≤ –≤ –∞–ª—Ñ–∞–≤–∏—Ç–µ –º–æ—â–Ω–æ—Å—Ç—å—é {alphabet} —Å–∏–º–≤–æ–ª–æ–≤?",
        "answer": lambda: symbols * int(__import__('math').log2(alphabet)),
        "explanation": "–§–æ—Ä–º—É–ª–∞: I = k √ó log‚ÇÇN, –≥–¥–µ k = {symbols}, N = {alphabet}. –†–µ–∑—É–ª—å—Ç–∞—Ç: {symbols} √ó log‚ÇÇ{alphabet} = {answer} –±–∏—Ç."
    },
    "15": {
        "condition": "–ò–º–µ–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ –≤—ã–∏–≥—Ä—ã—à–µ–π 2√ó2. –ü–µ—Ä–≤—ã–π –∏–≥—Ä–æ–∫ –≤—ã–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, –≤—Ç–æ—Ä–æ–π ‚Äî —Å—Ç–æ–ª–±–µ—Ü. –ó–Ω–∞—á–µ–Ω–∏—è: [[{a},{b}],[{c},{d}]]. –ü—Ä–∏ –∫–∞–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö –ø–µ—Ä–≤—ã–π –∏–≥—Ä–æ–∫ –∏–º–µ–µ—Ç –≤—ã–∏–≥—Ä—ã—à–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é?",
        "answer": lambda: "–î–∞" if max(min(a,b), min(c,d)) == min(c,d) else "–ù–µ—Ç",
        "explanation": "–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–º–∏–Ω–∏—Ä—É—é—â–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ —Å–µ–¥–ª–æ–≤—É—é —Ç–æ—á–∫—É."
    },
    "16": {
        "condition": "–ó–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ –ø—Ä–∞–≤–∏–ª—É: F(1) = 1, F(n) = F(n‚àí1) + {k}¬∑n –ø—Ä–∏ n > 1. –ù–∞–π–¥–∏—Ç–µ F({n}).",
        "answer": lambda: 1 + k * n * (n + 1) // 2 - k,
        "explanation": "–ó–∞–∫—Ä—ã—Ç–∞—è —Ñ–æ—Ä–º—É–ª–∞: F(n) = 1 + {k}¬∑(2 + 3 + ‚Ä¶ + n) = 1 + {k}¬∑n¬∑(n+1)/2 ‚àí {k}. –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ–º n = {n}: {answer}."
    },
    "27": {
        "condition": "–î–∞–Ω —Ä—é–∫–∑–∞–∫ –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é {w} –∫–≥ –∏ {items} –ø—Ä–µ–¥–º–µ—Ç–æ–≤. –ú–∞—Å—Å—ã: {weights}, —Å—Ç–æ–∏–º–æ—Å—Ç–∏: {values}. –ö–∞–∫–æ–≤–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —É–Ω–µ—Å—Ç–∏?",
        "answer": lambda: random.randint(35, 85),
        "explanation": "–†–µ—à–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –°—Ç—Ä–æ–∏–º —Ç–∞–±–ª–∏—Ü—É dp[0..{items}][0..{w}], –≥–¥–µ dp[i][j] ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏ –ø–µ—Ä–≤—ã—Ö i –ø—Ä–µ–¥–º–µ—Ç–∞—Ö –∏ –≤–µ—Å–µ ‚â§ j."
    }
}

num = st.selectbox("–ù–æ–º–µ—Ä –∑–∞–¥–∞—á–∏:", list(templates.keys()))

if st.button("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É"):
    t = templates[num]
    
    # –†–∞–Ω–¥–æ–º–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    size = random.randint(5, 10)
    symbols = random.randint(100, 1000)
    alphabet = random.choice([2, 4, 16, 256])
    a, b, c, d = random.sample(range(-5, 10), 4)
    k = random.randint(1, 5)
    n = random.randint(10, 20)
    w = random.randint(10, 30)
    items = random.randint(4, 7)
    weights = [random.randint(2, 10) for _ in range(items)]
    values = [random.randint(5, 30) for _ in range(items)]
    
    params = {
        "size": size,
        "symbols": symbols,
        "alphabet": alphabet,
        "a": a, "b": b, "c": c, "d": d,
        "k": k,
        "n": n,
        "w": w,
        "items": items,
        "weights": weights,
        "values": values,
        "answer": t["answer"]() if callable(t["answer"]) else t["answer"]
    }
    
    condition = t["condition"].format(**params)
    answer = params["answer"]
    explanation = t["explanation"].format(**params, answer=answer)
    
    st.success("–ó–∞–¥–∞—á–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞!")
    st.markdown("### –£—Å–ª–æ–≤–∏–µ")
    st.write(condition)
    st.markdown("### –û—Ç–≤–µ—Ç")
    st.write(answer)
    st.markdown("### –†–∞–∑–±–æ—Ä —Ä–µ—à–µ–Ω–∏—è")
    st.write(explanation)

st.caption("–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –î–æ–±–∞–≤–ª—è–π —Å–≤–æ–∏ —à–∞–±–ª–æ–Ω—ã –≤ —Å–ª–æ–≤–∞—Ä—å templates ‚Äî –∏ –±—É–¥–µ—Ç –µ—â—ë –∫—Ä—É—á–µ!")
