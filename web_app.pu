import streamlit as st
from openai import OpenAI

# ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←
# ВСТАВЬ СЮДА СВОЙ КЛЮЧ ОТ YANDEXGPT !!!
API_KEY = "y0_AgAAAAA...твой_длинный_ключ_здесь"
# ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←

client = OpenAI(api_key=API_KEY, base_url="https://llm.api.cloud.yandex.net/v1")

st.set_page_config(page_title="ЕГЭ-GPT по информатике", page_icon="robot")

st.title("ЕГЭ-GPT по информатике 2026")
st.markdown("Генератор и проверяльщик задач ЕГЭ № 6, 8, 12, 15, 16, 19–21, 23, 24, 25, 27")

# Выбор номера задачи
num = st.selectbox("Выбери номер задачи:", ["6", "8", "12", "15", "16", "19-21", "23", "24", "25", "27"])

if st.button("Сгенерировать новую задачу"):
    with st.spinner("ИИ думает..."):
        prompt = f"""
        Ты эксперт ФИПИ по информатике 2026 года.
        Сгенерируй СОВЕРШЕННО НОВУЮ задачу №{num} уровня ЕГЭ (не из открытого банка).
        Выведи:
        1. Полное условие задачи
        2. Правильный ответ
        3. Подробный разбор решения
        """
        response = client.chat.completions.create(
            model="yandexgpt-lite",
            messages=[{"role": "user", "content": prompt}],
            max_tokens=1500,
            temperature=0.4
        )
        result = response.choices[0].message.content
        st.success("Готово!")
        st.markdown(result)

# Проверка решения
st.markdown("---")
st.subheader("Проверить своё решение")
user_solution = st.text_area("Вставь сюда текст своего решения или ответ:")
if st.button("Проверить решение"):
    if user_solution:
        with st.spinner("Проверяю..."):
            check_prompt = f"Ты — строгий эксперт ЕГЭ. Проверь это решение задачи №{num}:\n\n{user_solution}\n\nУкажи ошибки, правильный ответ и сколько баллов дал бы эксперт ФИПИ (из 100)."
            resp = client.chat.completions.create(
                model="yandexgpt-lite",
                messages=[{"role": "user", "content": check_prompt}]
            )
            st.markdown(resp.choices[0].message.content)
    else:
        st.warning("Сначала введи решение!")
initial commit
